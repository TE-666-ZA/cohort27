# Lesson 40 - 28/06/2023

## 00. Воспоминания

* Конкатенация строк - это операция их соединения через `+`
* `a + b` = `ab`
* Поскольку строки неизменяемые, то каждая операция конкатенации порождает новую строку (создает новый объект)
* Следовательно, если конкатенацию применять в цикле, например:

```
String s = "";
for (int i = 0; i < 100; i++) {
    s = s + "a";
}
System.out.println(s); // aaaaaaaaaaaa.....a - 100 штук
```

* В коде выше, помимо создания строки из 100 букв `а`, вы создадите 100 объектов:

```
a
aa
aaa
aaaa
aaaaa
aaaaaa
...
```

![image](https://raw.githubusercontent.com/ait-tr/cohort27/main/basic_programming/lesson_40/img/1.png)

* StringBuilder - решение этой проблемы. Позволяет объединять строки без создания нового объекта.

## 01. Generics - нюансы

* Обобщенные методы - обобщать можно не только классы, но и методы
* Пример обобщенного метода

```
public static <T> MyArrayList<T> toMyArrayList(T[] array) {
    ...
}
```

* `<T>` - показывает, что метод является обобщенным методом.
* `T[]` - тип входного массива, говорим, что он будет какого-то типа `T`
* `MyArrayList<T>` - возвращаемое значение, список ТАКОГО ЖЕ ТИПА, КАК И ВХОДНОЙ МАССИВ

## 02. Оберточные типы/Wrappers

```
Integer
Boolean
Character
Double
Long
Short
Byte
Float
```

* У всех них одна структура, и все они нужны для Generics

```
public class Integer {
    private final int value; // поле, которое содержит целое число
    
    public Integer(int value) { // конструктор, через которое можно положить значение в поле
        this.value = value;
    }
    
    public int intValue() { // метод, для получения поля
        return value;
    }
}

public class Boolean {
    private final boolean value; // поле, которое содержит логическое значение
    
    public Boolean(boolean value) {
        this.value = value;
    }
    
    public boolean booleanValue() {
        return value;
    }
}
```

* Поскольку после компиляции и процесса стирания типов все T заменяются на Object
* А Object - это ссылочный тип, значит там нельзя использовать примитивные типы.
* Потому что нельзя просто так заменить `int` на `Object` и обратно, они разные по своей структуре.
* Поэтому оберточные типы нужны, чтобы их использовать в generics вместо примитивных
* `boxing` - упаковка примитивного значения в ссылочный тип (в обертку)
* `unboxing` - получение примитивного значения из ссылочного

![image](https://raw.githubusercontent.com/ait-tr/cohort27/main/basic_programming/lesson_40/img/2.png)

## 03. Практическая задача

* Необходимо реализовать реестр документов. 
* Для всего реестра документов можно будет проводить различные манипуляции с ними.
* Например - пронумеровать все или назначить какие-либо отметки (документ прошел проверку).
* Документы могут быть самыми различными.

### Цепочка для Generics

`DocumentsRegistry<Licence>` -> `Licence` -> `E` -> `DocumentItem<E>` -> `E` -> `T` -> `T document`

* Какие классы получились:
  * `Certificate, Licence, Statement` - это различные виды документов
  * `DocumentsRegistry<T>` - реестр документов определенного типа
  * `DocumentItem<T>` - документ, как элемент нашего реестра, хранит сам документ, а также дату его создания.
  * `ReviewedDocument<T>` - документ, прошедший проверку, хранит сам документ, дату проверки, а также текст проверки

## Словарик

* `subsequence` - подпоследовательность
* `concatenation` - соединение, сцепление
* `item` - элемент какого-либо множества
* `DocumentItem` - документ как элемент какого-то списка/множества/ресстра
* `Reviewed` - проверенный